# W1M1
## Q) 이런 데이터셋을 분석해서 얻을 수 있는 경제적 가치는 무엇일까요? 어떤 비즈니스 상황에서 이런 데이터셋을 분석해서 어떤 경제적 가치를 얻을 수 있을까요?

## A) 비즈니스 활용 방안

### 1. 차량 개발 과정에서 비용을 크게 절감할 수 있다.
자동차 개발은 크게 디자인, 엔지니어링, 테스트, 제조공정, 주행테스트 단계를 거쳐 판매로 이어지게 되며, 개발 기간과 비용에 있어 천문학적인 투자를 필요로 한다. 이러한 각각의 과정에서 데이터 분석을 통해 투자 비용을 크게 절감할 수 있다.


1. 선행 개발 및 시장 분석
   - 이 과정에서는 소비자들의 니즈와 투자 비용을 고려하여 신차에 대한 컨셉이 정해진다.
   - 경쟁 차종의 데이터 (ex: Honda vs Toyota)와 기존 판매 데이터를 함께 고려하여 소비자군별 선호도를 정량화할 수 있다.
   - 이때 타켓 소비자군의 니즈에 최대한 부합하도록 불필요한 사양 등을 제거하여 부품 단가와 개발 기간을 크게 줄일 수 있다. 또한 잘못된 컨셉으로 인한 재개발/재설계 리스크를 절감할 수 있다.
  
2. 부품 최적화
   - 이 과정에서는 차량에 들어갈 부품을 설계한다.
   - 연비와 마력간의 trade-off가 존재하기 때문에, 목표 소비자군에 따른 최적의 설계가 필수적이다.
   - 이때 부품과 연비, 마력간의 상관관계를 데이터 기반으로 분석하여 신차의 컨셉에 최적으로 부합하는 부품의 조합을 설계할 수 있다.
   - 즉, 시뮬레이션 기반으로 수천가지의 부품 조합을 실제로 테스트해보지 않아도 소비자 만족과 기술적 제약 내에서 최적의 조합을 도출할 수 있기 때문에 테스트 비용을 크게 줄일 수 있다.


3. 성능 평가 자동화
   - 평가 프로세스에서는 많은 인력과 시간을 필요로 한다. 만약 차량의 컨셉이 변경된다면 평가 프로세스 또한 다시 진행해야 하기 때문에 개발 과정이 지연 될 수 있고, 큰 비용적 손실이 발생할 수 있다.
   - 과거 출시된 차량 데이터로 학습한 모델을 이용하여, 차량의 성능을 미리 예측할 수 있고, 목표 소비자군에게 얼마나 매력적일지 정량적으로 평가할 수 있다.


4. 시제품 출시 및 판매 과정
   - 새롭게 출고되는 자동차의 초기 가격을 설정할 때 기존 모델들과의 스펙 비교를 통해 근거 있고 합리적이며 소비자에게 어필할 수 있는 가격을 설정할 수 있다. 또한, 과거 소비자 구매 데이터를 함께 고려하여 신차를 홍보할 소비자를 선정할 수 있고, 홍보 비용, 판매 이윤 등을 예측할 수 있다.


### 2. ESG 경영에 기여할 수 있다.
최근 대부분의 기업이 리스크 관리와 장기적 생존을 위해 ESG 경영을 강조하고 있다. ESG 경영은 단순한 환경 보호를 위한 움직임에서 나아가 기업 경쟁력을 확보할 수 있는 수단이다. 기업 투자, 글로벌 펀드 등이 ESG 점수가 높은 기업에 더 많은 자금을 투자하며, 점수가 낮거나 논란이 있는 기업은 투자 대상에서 제외되기 때문이다. 또한, 법적으로도 ESG 규제를 지키지 않을 시 벌금, 시장 진입 제한 등 불이익이 크다. 이렇듯 ESG는 리스크 관리 측면에서 기업이 필수적으로 고려해야 할 중요한 사안이다.


- 특히 현대/기아차가 진출하는 해외 시장 중 유럽연합과 미국의 경우, 엄격한 CO2 배출 규제를 시행하고 있기 때문에 연비와 마력, 배기량을 철저히 고려해야 한다.
- 아래의 산점도 그래프를 보았을 때, 연비와 배기량간의 강한 음의 상관관계가 존재한다. 즉, 연비가 높을수록 배기량이 적고, 연비가 낮을수록 배기량이 높음을 알 수 있다.
- 반면, 마력과 배기량의 경우 비선형 관계로 보이며, 마력을 최대화 할 수 있는 최적의 배기량이 존재하는 것으로 보인다.


일례로, 해당 데이터에서는 마력이 최대인 지점의 배기량은 450이지만, 이 경우 연비가 매우 낮다.
따라서 유럽, 미국 시장의 엄격한 환경 규제를 고려하면, 연비와 배기량을 최적화하는 것이 중요하며, 배기량을 줄여 연비를 개선하면서도 마력을 일정 수준까지 확보하는 균형점을 찾는 것이 가장 중요하다.

## Q)변수들 간의 상관 관계가 높은 조합을 임의로 2개 선택해서 해당 데이터 간의 상관 관계를 그래프로 그리고 어떤 결론을 내릴 수 있는지를 토의하세요.

- vs 는 엔진 형식으로 0일 경우 V형, 1일 경우 직렬 엔진 형식을 나타낸다. 설계 특성과 관련하여 직렬은 연비/정비성이 좋고, V형은 출력이 좋다. 
- transmission 는 변속기 종류로 0일 경우 자동, 1일 경우 수동을 나타낸다. 수동은 연비와 가속 성능이 좋지만 조작 난이도가 높다.
- 이 두 metric은 연비와 출력과 관련되어 있으므로 조합에 따라 연비와 마력에 있어서 상관관계를 가질것으로 예상 했다.
- vs와 transmission의 조합이 00, 01, 10, 11 이 됨에따라 연비의 경우 양의 상관관계를 가지고 마력의 경우 음의 상관관계를 가진다. 
- 결론적으로 원하는 연비 또는 마력의 스펙에 따라 vs 와 transmission의 조합을 고려할 수 있다.

```python
df['group'] = df['vs'].astype(str) + df['transmission'].astype(str)

plt.figure(figsize=(8, 5))
sns.stripplot(x='group', y='mpg', data=df, jitter=True, size=8, order=['00', '01', '10', '11'])

plt.title('MPG by VS-Trans Combination')
plt.xlabel('VS-Trans (00, 01, 10, 11)')
plt.ylabel('Miles Per Gallon (mpg)')
plt.grid(True)
plt.show()
```
<img src="https://github.com/sejjong/private_wiki/blob/main/missions/W1/MPG%20by%20VS-Trans.png" width="500" height="500"/>

```python
plt.figure(figsize=(8, 5))
sns.stripplot(x='group', y='hp', data=df, jitter=True, size=8, order=['00', '01', '10', '11'])

plt.title('HP by VS-Trans Combination')
plt.xlabel('VS-Trans (00, 01, 10, 11)')
plt.ylabel('Horse Power (hp)')
plt.grid(True)
plt.show()
```
<img src="https://github.com/sejjong/private_wiki/blob/main/missions/W1/HP%20by%20VS-Trans.png" width="500" height="500"/>

- 실린더 수가 많을수록 배기량이 많아지는 경향성을 보인다.
- 배기량이 클수록 더 많은 연료를 태우므로 더 큰 힘을 내는 스포츠카, 대형SUV와 같은 차량일 가능성이 높다.
- 그에 따라 차량 자체가 무거워지므로 브레이크, 서스펜션, 구동 방식 등에 전체적으로 영향을 줄 것이다.

```python
plt.figure(figsize=(8, 6))
plt.scatter(df['cyl'], df['disp'], alpha=0.7)

plt.title('Cyl vs Disp', fontsize=14)
plt.xlabel('Cyl', fontsize=12)
plt.ylabel('Disp', fontsize=12)

plt.grid(True, linestyle='--', alpha=0.5)
plt.tight_layout()
plt.show()
```
<img src="https://github.com/sejjong/private_wiki/blob/main/missions/W1/Cyl%20vs%20Disp.png" width="500" height="500"/>


# W1M2
## 각자가 이해하기 어려웠던, 또는 이해하지 못한 keyword에 대해서 함께 토의해 봅시다. 그 결과를 개인 위키에 기록하세요.

### JOIN
테이블을 자유롭게 다룰 수 있고 잘 다룸으로써 데이터를 추가하지 않고 기존 데이터를 더 잘 활용 가능
단순히 문법을 암기하는 것 뿐만 아니라 관계형 데이터를 구조적으로 이해하고 시각화하는 능력이 필요하다고 생각함 -> 어려움

### python을 이용하여 SQL 쿼리를 작성할 때의 비효율
sqlite3을 파이썬에서 사용할 때 일일이 cursor.execute()를 사용하여 실행해야 하는 불편함이 있었다. 더 효율적인 방법으로 작성하고 싶어서 방법을 찾아보았더니 SQL 쿼리를 개별 파일에 저장하고, 이를 pd.read_sql_query()로 실행하는 해결책을 발견하였다. 한편 Oracle 문법과 sqlite3의 문법이 달라서 실행이 안 되는 예제가 많이 있었다. 해당 예제는 Oracle 환경에서 다시 시도해볼 것이다.

### LIKE
LIKE 문을 사용할 때 “%A” 와 같은 식으로 제일 앞의 문자를 제한하지 않으면 검색할 때 오래 걸린다는 것을 처음 알았다. LIKE 문을 사용할 때도 그냥 쓰지 말고 이런 부분을 생각할 수 있으면 좋겠다.


# W1M3

## wikipedia 페이지가 아닌, IMF 홈페이지에서 직접 데이터를 가져오는 방법은 없을까요? 어떻게 하면 될까요?

- IMF 에서 발표하는 보고서가 주기적으로 업로드되는데, 이 사이트를 셀레니움으로 최근에 업데이트된 보고서의 url을 얻고, 보고서를 다운로드하는 과정을 자동화하여 웹 스크래핑을 하면 GDP 데이터를 xls 파일 형식으로 가져올 수 있다. 따라서 wikipedia 페이지와 같이 작성자에 따라 변하지 않고 고정된 방식으로 데이터를 가져올 수 있기 때문에 시간이 지나더라도 동일한 방식으로 데이터를 추출할 수 있다.



## 만약 데이터가 갱신되면 과거의 데이터는 어떻게 되어야 할까요? 과거의 데이터를 조회하는 게 필요하다면 ETL 프로세스를 어떻게 변경해야 할까요?

- bs4를 통해 정적으로 크롤링하는 경우 html 문서의 last modified date를 이용한다. 이를 GDP 테이블의 새로운 칼럼으로 추가하여 기존에 존재하는 GDP 데이터와 비교하여 변경 시간이 다를 경우 테이블에 최신 GDP 값들을 추가하고 출력하는 경우 변경 시간이 가장 큰(가장 최신) GDP 값만을 출력하도록 한다.

- 셀레니움을 통해 동적으로 데이터를 추출하는 경우 보고서가 업로드되는 연도와 월을 컬럼으로 추가하여 과거의 데이터를 DB에 축적할 수 있다. 
결과적으로 ETL을 wikipedia 에서 진행하는지, IMF 홈페이지에서 진행하는지에 따라 ETL 프로세스를 다르게 설계해야한다.

```
- 정규화
- GDP table (country*, gdp, year*, update date*), Region table(country*, continent) (*은 PK)
- GDP 테이블
| country | year | gdp | update_id |
|---------|------|-----|-----------|
| 대한민국 | 2024 | 2000 | 1 |


- Last_modified 테이블
| update_id | update_date |
|-----------|-------------|
| 1 | 2024-06-30 |
| 2 | 2024-12-31 |

```
